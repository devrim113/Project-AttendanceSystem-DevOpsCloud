# https://aws.amazon.com/blogs/compute/load-testing-a-web-applications-serverless-backend/
# https://www.artillery.io/docs/get-started/first-test

config:
  # This is a test server run by team Artillery
  # It's designed to be highly scalable
  target: "http://asciiart.artillery.io:8080"
  phases:
    - duration: 60
      arrivalRate: 1
      rampTo: 5
      name: Warm up phase
    - duration: 120
      arrivalRate: 50
      name: Spike phase

scenarios:
  - flow:
      - post:
          url: "/authenticate" # Authentication endpoint
          json:
            username: "username"
            password: "password"
      - save:
          response:
            - authToken
      - loop:
          - get:
              url: "/course"
              headers:
                Authorization: "Bearer {{ authToken }}"
