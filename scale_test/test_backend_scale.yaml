# https://aws.amazon.com/blogs/compute/load-testing-a-web-applications-serverless-backend/
# https://www.artillery.io/docs/get-started/first-test

# usage: artillery run --variables '{ "authToken": "<<JWT_TOKEN>>" }' scale_test/test_backend_scale.yaml
# https://www.artillery.io/docs/reference/cli/run#set-scenario-variables-on-the-fly

config:
  target: "https://d5j4m0w9schy1.cloudfront.net"
  phases:
    - duration: 120
      arrivalRate: 50
      name: Spike phase
  # defaults:
  #   headers:
  #     Authorization: "Bearer {{ authToken }}"

scenarios:
  - flow:
      - get:
          url: "/"
